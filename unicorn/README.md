# Numenta Unicorn

> Cross-platform Desktop Application to demonstrate basic HTM functionality to
> users using their own data files.


## @TODOS UNDER HEAVY DEVELOPMENT

This is for Brev over the weekend, will clean up soon.

* Setup logging: Winston or Bunyan? check w/Ops
* Errors can do screenshots:
  * https://github.com/atom/electron/blob/master/docs/api/browser-window.md#browserwindowcapturepagerect-callback
* Dev tool resources for Web, Node, Electron, Browser addons, etc.
  * npm install https://github.com/sindresorhus/electron-debug
  * Electron-specific --debug flags:
    * npm install https://github.com/node-inspector/node-inspector
    * https://github.com/atom/electron/blob/master/docs/tutorial/debugging-main-process.md
  * React and Chrome browser devtools in Electron:
    * http://electron.atom.io/docs/v0.31.0/tutorial/devtools-extension/
  * Node debugger https://nodejs.org/api/debugger.html
  * Electron-supported Chrome command line switches:
    * http://electron.atom.io/docs/v0.31.0/api/chrome-command-line-switches/
  * Set up Debug Symbol Server (windows?)
    * http://electron.atom.io/docs/v0.31.0/development/setting-up-symbol-server/
* Use https://github.com/electronjs/electron-rebuild to get npm packages
  into Electron, instead of using WebPack build? Probably a good idea.
* Document: Electron/Babel/WebPack - which doing what? and what order?
  * ES6/7. imports/requires. electron/browser.
* Add in Flow type checking
* add in Dygraph/FaceOfGrok
* make real tests and make tests work
* setup linting
* add retina.js for hd images
* setup css and image assets etc
* add Architecture docs and charts
* Sync our FE dir structure w/Electron's:
  * http://electron.atom.io/docs/v0.31.0/development/source-code-directory-structure/


## Repository

The `frontend/` directory contains Cross-platform Desktop Application GUI code,
running Javascript/HTML/CSS/etc. on [Node.js](https://nodejs.org/),
[Electron](https://github.com/atom/electron), and
[Google Chromium](https://www.chromium.org/Home). It also contains non-GUI logic
to run and manage HTM Models on the Unicorn `backend/` model runner.

The `backend/` directory contains Unicorn ModelRunner and supporting code
(Python / C++), which drives the main functionality of the app, which it is our
goal to demo to the user.

```shell
DEPENDENCIES.md     # Module dependency overview file
LICENSE.txt         # Dual: Commercial and GPLv3
README.md           # This file, a project overview
backend/            # Unicorn ModelRunner and support Python/C++ code here!
  README.md         # Overview for HTM/NuPIC part of project
frontend/           # Frontend+GUI that exposes NuPIC HTM functionality to the User
  README.md         # Overview for Frontend+GUI part of project
  browser/          # Javascript, HTML, CSS act as GUI inside browser window
    app.js          # Fluxible GUI Browser Web App entry, compiles to bundle.js
    bundle.js       # Autogenerated WebPack output compiled Javascript bundle
    bundle.js.map   # JS Sourcemap for Autogenerated WebPack Javascript bundle
    index.html      # App main startup browser window contents
    actions/        # Fluxible Actions JS
    components/     # React view components JSX
    stores/         # Fluxible Stores JS
  lib/              # Javascript that lives outside the browser (engine / model runner)
  loader.js         # Electron App entry point loader for main.js ES5 => ES6
  main.js           # ES6 Electron App main entry, creates browser GUI window + model runner engine
  test/             # Frontend tests run by Mocha: Unit, etc.
    unit/           # Frontend+GUI Unit tests
gulpfile.babel.js   # Babel.js ES6 Config file for the Gulp build tool
node_modules/       # Where `npm` installs packages to
package.json        # Node.js `npm` packages, dependencies, and App config
```


## Technology

### Backend

> See: `requirements.txt`

* Languages:
  * [Python](http://python.org)
  * [C++](https://isocpp.org/)
* Machine Intelligence:
  * [NuPIC](htts://github.com/numenta/nupic)

The Machine Intelligence behind this app is a technology known as Hierarchical
Temporal Memory (HTM). NuPIC is Numenta's open source HTM engine. NuPIC runs
on streams of data, predicting future values, and detecting pattern anomalies.

### Frontend

> See: `package.json`

* Languages:
  * Javascript
    * [ECMAScript 5.1](https://es5.github.io/) (>= IE9)
    * [ECMAScript 6](https://babeljs.io/docs/learn-es2015/) (aka ES2015) via
      [Babel](https://babeljs.io/)
    * Facebook [Flow](http://flowtype.org/) JS Typing
  * [HTML5](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5)
  * [CSS3](https://developer.mozilla.org/en-US/docs/Web/CSS) with
    [SASS](http://sass-lang.com/) via
    [node-sass](https://github.com/sass/node-sass)
* Framework: [Electron](https://github.com/atom/electron)
  * Engines: [Chromium](https://www.chromium.org/Home),
    [IO.js](https://iojs.org/), [Node](https://github.com/joyent/node)
  * Module Loader: [WebPack](https://github.com/webpack/webpack)
  * User Interface:
    * Architecture: [Fluxible](http://fluxible.io/)
      ([Flux](https://facebook.github.io/flux/docs/overview.html#content)
      Uni-directional data flow)
    * View Components: [React](https://github.com/facebook/react),
      [JSX](https://facebook.github.io/jsx/)
    * Graphing and Charting: [DyGraphs](http://dygraphs.com/)
      * @TODO Alternatives: [react-chartjs](https://github.com/jhudson8/react-chartjs)
        Canvas, [react-d3](https://github.com/esbullington/react-d3) SVG
    * HD Images: [Retina.js](http://imulus.github.io/retinajs/)
* Testing:
  * Test Runner, Unit Tests: [Mocha](https://github.com/mochajs/mocha)
  * Web Tests: [Casper](https://github.com/n1k0/casperjs)
* Tooling:
  * Streaming task runner: [Gulp](https://github.com/gulpjs/gulp)
  * JS transpiling (ES6, JSX, etc): [Babel](https://github.com/babel/babel)
  * Linting: [eslint](http://eslint.org/)
  * @TODO JS formatting: [jsfmt](https://github.com/rdio/jsfmt) - NO ES6 yet!

The Frontend contains code to manage Models on the Backend. It also contians
the Graphical User Interface that allows users to explore HTM Models on their
own data.

The GUI for this application is web code. Javascript, HTML, and CSS are loaded
into a browser. For Desktop, this browser is a bare-bones Chrome window opened
by the Electron framework. Electron also runs IO.js (Node.js edge) to connect
with the host Operating System, allowing for cross-platform native controls.

In the browser, we run a one-way Uni-directional data flow, an Architecture
known as "Flux".

Below is an example of tracing of our way through GUI initialization, GUI first
loop run, and GUI loop continuation:

1. Electron loads `frontend/main.js`
1. .. which (or Browser directly) loads `frontend/browser/index.html`
1. .. which loads `frontend/browser/js/app.js`
1. .. which inits Fluxible
1. .. and then Fluxible fires off an initial Action
1. .. which dispatches Events with state data to Stores
1. .. which then integrate state data into themselves
1. .. and then View Components tied to updated Stores render
1. .. and then The User interacts with the app firing off a new Action
1. .. GOTO #6, RINSE and REPEAT.


## Development

### Setup

Example of setting up development environment:

```shell
brew install git node  # darwin
git clone https://github.com/numenta/numenta-apps
cd numenta-apps/unicorn
npm install
```

### Targets

#### Desktop App

Start code via Electron as a Desktop App:

```shell
npm run start
```

#### Web App

This is *nice-to-have*, and *not* required like the Desktop App. The more this
Web version stays synced with the Desktop version, the easier it will be to
later port this to a real Web App, or to Android/iOS mobile via
[React Native](https://facebook.github.io/react-native/).

Start app on local webserver, you can open it with Chrome Browser
at `http://localhost:9999`:

```shell
npm run dev
```


## Guidelines

* Javascript
  * [ES5 Styleguide](https://github.com/felixge/node-style-guide)
  * ES6 styleguide AirBnB? @TODO
  * Flow Typing styleguide? @TODO
  * Web changes fast, keep packages up-to-date with `npm run check`
* HTML and CSS @TODO
