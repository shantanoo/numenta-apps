/* ----------------------------------------------------------------------
 * Numenta Platform for Intelligent Computing (NuPIC)
 * Copyright (C) 2015, Numenta, Inc.  Unless you have purchased from
 * Numenta, Inc. a separate commercial license for this software code, the
 * following terms and conditions apply:
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero Public License version 3 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Affero Public License for more details.
 *
 * You should have received a copy of the GNU Affero Public License
 * along with this program.  If not, see http://www.gnu.org/licenses.
 *
 * http://numenta.org/licenses/
 * ---------------------------------------------------------------------- */
(function(){var PALETTE={blue:"#29aae1",green:"#e80e89",red:"#e31a1c"};var DEFAULT_OPTIONS={width:800,height:600};var DYGRAPH_CALLBACKS=["click","draw","highlight","pointClick","underlay","unhighlight","zoom"];function NuGraph(elementId,data,options){var me=this,mainCallbacks={},cutStart=0,cutStop=data.length,index;this._listeners={};this._drawn=false;if(options["dateStart"]||options["dateStop"]){for(index=0;index<data.length;index++){if(options["dateStart"]&&options["dateStart"]>new Date(data[index][0])&&cutStart<index){cutStart=index}if(options["dateStop"]&&options["dateStop"]<new Date(data[index][0])&&cutStop>index){cutStop=index}}data.splice(0,cutStart);data.splice(cutStop-cutStart,data.length)}DYGRAPH_CALLBACKS.forEach(function(CB){var cbName=CB+"Callback";mainCallbacks[cbName]=function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(CB);if(CB==="draw"){me._drawn=true}me._emit.apply(me,args)};if(options[cbName]){me.on(CB,options[cbName])}});this._args=[document.getElementById(elementId),data,$.extend({},DEFAULT_OPTIONS,options,mainCallbacks)]}NuGraph.prototype=GROK.util.heir(Dygraph.prototype);NuGraph.prototype.constructor=Dygraph;NuGraph.prototype.on=function(event,callback){if(!callback||!event){return}if(!this._listeners[event]){this._listeners[event]=[]}this._listeners[event].push(callback)};NuGraph.prototype._emit=function(){var me=this,args=Array.prototype.slice.call(arguments,0),event=args.shift();if(this._listeners[event]){this._listeners[event].forEach(function(listener){listener.apply(me,args)})}};NuGraph.parseGrokDateString=function(dateTimeString){var dateOut,dateTimeParts,dateParts,timeParts;if(!isNaN(Date.parse(dateTimeString))){dateOut=new Date(dateTimeString)}else{dateTimeParts=dateTimeString.split(" ");dateParts=dateTimeParts.shift().split("-");timeParts=dateTimeParts.shift().split(":");dateOut=new Date(parseInt(dateParts[0],10),parseInt(dateParts[1],10)-1,parseInt(dateParts[2],10),parseInt(timeParts[0],10),parseInt(timeParts[1],10),parseInt(timeParts[2],10))}return dateOut};NuGraph.prototype.syncTo=function(otherNuGraph,options){var me=this;options=options||{};otherNuGraph.on("draw",function(){var updatedOptions;if(me.blockRedraw){return}this.blockRedraw=true;updatedOptions={dateWindow:otherNuGraph.xAxisRange()};if(options.syncY){updatedOptions.valueRange=otherNuGraph.yAxisRange()}if(!me._drawn){me.on("draw",function(graph,isInitial){if(isInitial){me.updateOptions(updatedOptions)}})}else{me.updateOptions(updatedOptions)}this.blockRedraw=false})};NuGraph.prototype.syncLegendTo=function(otherNuGraph){var me=this;var highlightTimeoutId;otherNuGraph.on("highlight",function(event,x,points,row){me.setSelection(me._dataIndexOf(x));if(highlightTimeoutId){clearTimeout(highlightTimeoutId);highlightTimeoutId=undefined}});otherNuGraph.on("unhighlight",function(){highlightTimeoutId=setTimeout(function(){me.clearSelection()},10)})};NuGraph.prototype._dataIndexOf=function(x){var i=0;var index=-1;for(;i<this.rawData_.length;i++){if(x===this.rawData_[i][0]){index=i;break}}return index};NuGraph.prototype.render=function(options){var renderOptions=$.extend({},this._args[2],options||{});Dygraph.apply(this,[this._args[0],this._args[1],renderOptions])};NuGraph.PALETTE=PALETTE;window.NuGraph=NuGraph})();(function(){function barChartPlotter(e){var ctx=e.drawingContext;var points=e.points;var y_bottom=e.dygraph.toDomYCoord(0);var i;var color=new RGBColor(e.color);ctx.fillStyle=color.toRGB();var min_sep=Infinity;for(i=1;i<points.length;i++){var sep=points[i].canvasx-points[i-1].canvasx;if(sep<min_sep)min_sep=sep}var bar_width=Math.floor(2/3*min_sep);for(i=0;i<points.length;i++){var p=points[i];var center_x=p.canvasx;ctx.fillRect(center_x-bar_width/2,p.canvasy,bar_width,y_bottom-p.canvasy);ctx.strokeRect(center_x-bar_width/2,p.canvasy,bar_width,y_bottom-p.canvasy)}}function NuBarGraph(elementId,data,options){NuGraph.call(this,elementId,data,$.extend({},{plotter:barChartPlotter},options))}NuBarGraph.prototype=GROK.util.heir(NuGraph.prototype);NuBarGraph.prototype.constructor=NuGraph;window.NuBarGraph=NuBarGraph})();(function(){var DEFAULT_OPTIONS={showRangeSelector:true,colors:[NuGraph.PALETTE.blue,NuGraph.PALETTE.green],rightGap:0};function PredictionGraph(elementId,modelOutput,options){var formattedOutput=this._formatModelOutputData(modelOutput);var nugraphOptions=$.extend({labels:formattedOutput.labels},DEFAULT_OPTIONS,options);NuGraph.call(this,elementId,formattedOutput.data,nugraphOptions)}PredictionGraph.prototype=GROK.util.heir(NuGraph.prototype);PredictionGraph.prototype.constructor=NuGraph;PredictionGraph.prototype._formatModelOutputData=function(modelOutput){var meta=modelOutput.meta,outputData=[],outputLabels=[],temporalIndex,predictedFieldIndex,predictedFieldPredictionIndex,predictedFieldName,predictedFieldLabel,predictionSteps,extraRows=1;temporalIndex=meta.timestampIndex;predictedFieldIndex=meta.predictedFieldIndex;predictedFieldPredictionIndex=meta.predictedFieldPredictionIndex;predictedFieldName=modelOutput.names[predictedFieldIndex];predictedFieldLabel=predictedFieldName.charAt(0).toUpperCase()+predictedFieldName.slice(1);predictionSteps=meta.predictionSteps;if(predictionSteps){extraRows=predictionSteps.reduce(function(previous,current){if(current>previous){return current}else{return previous}},0)}outputLabels.push("Time");outputLabels.push(predictedFieldLabel||"Actual ");outputLabels.push("Predicted "+predictedFieldLabel);modelOutput.data.forEach(function(dataRow,i){var outputRow=[],value,prediction;if(i===0||i>=modelOutput.data.length-extraRows){return}value=dataRow[predictedFieldIndex];prediction=parseFloat(dataRow[predictedFieldPredictionIndex]);outputRow.push(NuGraph.parseGrokDateString(dataRow[temporalIndex]));outputRow.push(value===""?null:parseFloat(value));outputRow.push(prediction===""?null:parseFloat(prediction));outputData.push(outputRow)});return{labels:outputLabels,data:outputData}};window.PredictionGraph=PredictionGraph})();(function(){var DEFAULT_OPTIONS={colors:[NuGraph.PALETTE.blue],valueRange:[0,1],rightGap:0};function findValueByFloatKey(map,keyFloat){var precisionCountdown=12,confidence;if(map[keyFloat]){return map[keyFloat]}while(!confidence&&precisionCountdown>2){confidence=map[keyFloat.toFixed(precisionCountdown--)]}return confidence}function findConfidenceValueHack(details,predictionSteps,prediction){var confidence;if(details){if(predictionSteps){confidence=findValueByFloatKey(details[predictionSteps[0]],prediction)}else{confidence=details[1][prediction]}}return confidence}function PredictionConfidenceGraph(elementId,modelOutput,options){var formattedOutput=this._formatModelOutputData(modelOutput);var nugraphOptions=$.extend({labels:formattedOutput.labels},DEFAULT_OPTIONS,options);NuBarGraph.call(this,elementId,formattedOutput.data,nugraphOptions)}PredictionConfidenceGraph.prototype=GROK.util.heir(NuBarGraph.prototype);PredictionConfidenceGraph.prototype.constructor=NuBarGraph;PredictionConfidenceGraph.prototype._formatModelOutputData=function(modelOutput){var predictionDetailsLabel="Prediction Details",meta=modelOutput.meta,outputData=[],outputLabels=["Time","Confidence"],temporalIndex=meta.timestampIndex,predictedFieldPredictionIndex=meta.predictedFieldPredictionIndex,predictionDetailsIndex=modelOutput.names.indexOf(predictionDetailsLabel),predictionSteps=meta.predictionSteps,extraRows=1;if(predictionSteps){extraRows=predictionSteps.reduce(function(previous,current){if(current>previous){return current}else{return previous}},0)}modelOutput.data.forEach(function(dataRow,i){var details,hackedDetails;var prediction;var rawConfidence,confidence;if(i===0||i>=modelOutput.data.length-extraRows){return}details=dataRow[predictionDetailsIndex];prediction=parseFloat(dataRow[predictedFieldPredictionIndex]);confidence=findConfidenceValueHack(details,predictionSteps,prediction);outputData.push([NuGraph.parseGrokDateString(dataRow[temporalIndex]),confidence])});return{labels:outputLabels,data:outputData}};window.PredictionConfidenceGraph=PredictionConfidenceGraph})();(function(){var DEFAULT_OPTIONS={colors:[NuGraph.PALETTE.blue],valueRange:[0,1],rightGap:0};function AnomalyScoreGraph(elementId,modelOutput,options){var formattedOutput=this._formatModelOutputData(modelOutput);var nugraphOptions=$.extend({labels:formattedOutput.labels},DEFAULT_OPTIONS,options);NuBarGraph.call(this,elementId,formattedOutput.data,nugraphOptions)}AnomalyScoreGraph.prototype=GROK.util.heir(NuBarGraph.prototype);AnomalyScoreGraph.prototype.constructor=NuBarGraph;AnomalyScoreGraph.prototype._formatModelOutputData=function(modelOutput){var meta=modelOutput.meta,outputData=[],outputLabels=["Time","Anomaly"],temporalIndex=meta.timestampIndex,anomalyIndex=meta.anomalyScoreFieldIndex,predictionSteps=meta.predictionSteps,extraRows=1;if(predictionSteps){extraRows=predictionSteps.reduce(function(previous,current){if(current>previous){return current}else{return previous}},0)}modelOutput.data.forEach(function(dataRow,i){if(i===0||i>=modelOutput.data.length-extraRows){return}outputData.push([NuGraph.parseGrokDateString(dataRow[temporalIndex]),parseFloat(dataRow[anomalyIndex])])});return{labels:outputLabels,data:outputData}};window.AnomalyScoreGraph=AnomalyScoreGraph})();(function(){var DEFAULT_OPTIONS={drawYAxis:false};function DanglingPredictionGraph(elementId,modelOutput,options){PredictionGraph.call(this,elementId,modelOutput,$.extend({},DEFAULT_OPTIONS,options))}DanglingPredictionGraph.prototype=GROK.util.heir(PredictionGraph.prototype);DanglingPredictionGraph.prototype.constructor=PredictionGraph;DanglingPredictionGraph.prototype._getCopyOfOptionsWithUpdatedDateWindow=function(options){var endDate,optionsCopy=$.extend({},options);if(optionsCopy.dateWindow){endDate=options.dateWindow[1];optionsCopy.dateWindow=[endDate,endDate+this._timeInterval*2]}return optionsCopy};DanglingPredictionGraph.prototype._formatModelOutputData=function(modelOutput){var formattedOutput,data,onePointBackTime,twoPointsBackTime;var danglingPredictionData=modelOutput.data[modelOutput.data.length-1];var danglingPredictionValue=danglingPredictionData[modelOutput.meta.predictedFieldPredictionIndex];formattedOutput=this.constructor.prototype._formatModelOutputData.call(this,modelOutput);data=formattedOutput.data;onePointBackTime=data[data.length-1][0].getTime();twoPointsBackTime=data[data.length-2][0].getTime();this._timeInterval=onePointBackTime-twoPointsBackTime;data.push([new Date(onePointBackTime+this._timeInterval),null,danglingPredictionValue]);return formattedOutput};DanglingPredictionGraph.prototype.updateOptions=function(options,blockRedraw){var optionsCopy=this._getCopyOfOptionsWithUpdatedDateWindow(options);this.constructor.prototype.updateOptions.call(this,optionsCopy,blockRedraw)};window.DanglingPredictionGraph=DanglingPredictionGraph})();(function(){var JSON_CAP_REGEX=/,"{|}",/;var PREDICTION_HEIGHT_PERCENTAGE=.8;var PREDICTION_WIDTH_PERCENTAGE=.8;var DEFAULT_OPTIONS={width:800,height:600};function addListener(listeners,name,callback){if(!listeners[name]){listeners[name]=[]}listeners[name].push(callback)}function emit(listeners,name,payload){if(listeners[name]){listeners[name].forEach(function(listener){listener(payload)})}}function modelIsValid(model,callback){var err=null;if(!model){err=new Error("Model given to FaceOfGrok does not exist.")}callback(err)}function thereAreNoOutputRows(rows){return!rows.meta||rows.data.length===0||rows.data.names===0}function getPredictedFieldTitle(rows){var title="Unknown";if(typeof rows!=="string"){title="Predicted "+rows.names[rows.meta.predictedFieldIndex]}return title}function shiftColumnDownOne(array,columnIndexToShift){var tempSave,lastValue="",rowIndex=0,row;for(;rowIndex<array.length;rowIndex++){row=array[rowIndex];tempSave=row[columnIndexToShift];array[rowIndex][columnIndexToShift]=lastValue;lastValue=tempSave}return array}function interpolateMetaData(names){var bestPredictionName="Best Prediction",predictedFieldIndex,predictedFieldPredictionIndex,timestampIndex;names.forEach(function(name,nameIndex){if(name===bestPredictionName){predictedFieldPredictionIndex=nameIndex}else if(name.indexOf("(temporal)")>-1){timestampIndex=nameIndex}else if(name.indexOf("(predicted)")>-1){predictedFieldIndex=nameIndex}});return{predictedFieldPredictionIndex:predictedFieldPredictionIndex,predictedFieldIndex:predictedFieldIndex,timestampIndex:timestampIndex}}function splitCsvLine(line){var pieces,start,predictionDetails,end,output;if(!JSON_CAP_REGEX.test(line)){return line.split(",")}pieces=line.split(JSON_CAP_REGEX);start=pieces[0];predictionDetails="{"+pieces[1]+"}";predictionDetails=predictionDetails.replace(/""/g,'"');predictionDetails=JSON.parse(predictionDetails);end=pieces[2];output=start.split(",");output.push(predictionDetails);output=output.concat(end.split(","));return output}function csvToModelOutput(inputString){var csvArray=inputString.split("\n").map(function(line){return splitCsvLine(line)});var names=csvArray.shift();var meta=interpolateMetaData(names);return{data:shiftColumnDownOne(csvArray,meta.predictedFieldPredictionIndex),names:names,meta:meta}}function translateCsvToModelOutputRows(csvUri,callback){$.ajax(csvUri,{success:function(resp){callback(null,csvToModelOutput(resp))},failure:function(err){callback(new Error("Failure getting CSV from "+csvUri))}})}function FaceOfGrok(element,input,options){if(typeof element==="string"){this.rootId=element;this.$fog=$("#"+element)}else{this.$fog=element;this.rootId=this.$fog.attr("id")||"fog-"+(new Date).getTime()}this.allGraphs=[];this.predictionGraphId=this.rootId+"-predictions";this.confidenceGraphId=this.rootId+"-confidence";this.danglingPredictionGraphId=this.rootId+"-dangling";this.legendHeight=44;this.legendKey=(new Date).getTime();this.cachedData=options&&options.cachedData?options.cachedData:null;this.dynamic=options&&options.dynamic?options.dynamic:false;this.autoScroll=this.dynamic?true:false;this.rangeXwidth=null;if(typeof input==="string"){this.csvUri=input}else if(input.constructor&&input.constructor.NAMESPACE&&input.constructor.NAMESPACE==="models"){this.model=input}else{throw new Error("FaceOfGrok expected a Model Instance or CSV")}this.options=$.extend({},DEFAULT_OPTIONS,options);this.listeners={};this.renderedGraphs=0}FaceOfGrok.prototype.on=function(name,callback){addListener(this.listeners,name,callback)};FaceOfGrok.prototype.render=function(){var me=this,predictionSteps=me.model.get("predictionSteps");if(me.model){modelIsValid(me.model,function(err){if(err){return me._reportFatalError("render",err)}if(me.cachedData){me._modelOutput=me.cachedData;me._createAndRenderGraphs(me.cachedData,predictionSteps)}else{var dataCallOptions={shift:true};if(me.options.maxOutputRows){dataCallOptions.limit=me.options.maxOutputRows}me.model.getOutputData(dataCallOptions,function(err,rows){if(err){return me._reportFatalError("render",err)}if(rows.meta.timestampIndex<0){return me._reportFatalError("render",new Error("Cannot display, model does not have timestamps."))}me._modelOutput=rows;me._createAndRenderGraphs(rows,predictionSteps)})}})}else if(me.csvUri){translateCsvToModelOutputRows(me.csvUri,function(err,rows){if(err){return me._reportFatalError("render",err)}me._createAndRenderGraphs(rows)})}else{throw new Error("Cannot execute Face of Grok without a model or a csv URI!")}};FaceOfGrok.prototype._createAndRenderGraphs=function(rows,predictionSteps){var me=this,predictionGraph,danglingPredictionGraph,confidenceGraph,predictionGraphOptions,danglingPredictionGraphOptions,confidenceGraphOptions,anomalyGraphOptions;if(thereAreNoOutputRows(rows)){return this._reportFatalError("render",new Error("Model "+this.model.getId()+" has no output data."))}function mainDrawCallback(graph,isInitial){if(isInitial){me.renderedGraphs++}me._graphDrawn.apply(me,arguments)}if(predictionSteps){rows.meta.predictionSteps=predictionSteps}predictionGraphOptions={title:"Predictions",height:Math.floor(this.options.height*PREDICTION_HEIGHT_PERCENTAGE-this.legendHeight),width:Math.floor(this.options.width*PREDICTION_WIDTH_PERCENTAGE),labelsShowZeroValues:false,labelsDiv:"fog-legend-top-"+this.legendKey};predictionGraphOptions[getPredictedFieldTitle(rows)]={strokePattern:Dygraph.DASHED_LINE};danglingPredictionGraphOptions={title:"Next Prediction",interactionModel:null,height:Math.floor(this.options.height*PREDICTION_HEIGHT_PERCENTAGE-this.legendHeight),width:Math.floor(this.options.width*(1-PREDICTION_WIDTH_PERCENTAGE)),labelsDiv:"fog-legend-top-"+this.legendKey};danglingPredictionGraphOptions[getPredictedFieldTitle(rows)]={strokePattern:Dygraph.DASHED_LINE};confidenceGraphOptions={title:"Prediction confidence",height:Math.floor(this.options.height*(1-PREDICTION_HEIGHT_PERCENTAGE)),width:Math.floor(this.options.width*PREDICTION_WIDTH_PERCENTAGE),labelsDiv:"fog-legend-bottom-"+this.legendKey};anomalyGraphOptions={title:"Anomaly score",height:Math.floor(this.options.height*(1-PREDICTION_HEIGHT_PERCENTAGE)),width:Math.floor(this.options.width*PREDICTION_WIDTH_PERCENTAGE),labelsDiv:"fog-legend-bottom-"+this.legendKey};this._prepareDomForFogCharts();this.predictionGraph=predictionGraph=new PredictionGraph(this.predictionGraphId,rows,predictionGraphOptions);predictionGraph.on("draw",mainDrawCallback);this.allGraphs.push(predictionGraph);danglingPredictionGraph=new DanglingPredictionGraph(this.danglingPredictionGraphId,rows,danglingPredictionGraphOptions);danglingPredictionGraph.on("draw",mainDrawCallback);this.allGraphs.push(danglingPredictionGraph);if(me.model.get("modelType")==="anomalyDetector"){confidenceGraph=new AnomalyScoreGraph(this.confidenceGraphId,rows,anomalyGraphOptions)}else{confidenceGraph=new PredictionConfidenceGraph(this.confidenceGraphId,rows,confidenceGraphOptions)}confidenceGraph.on("draw",mainDrawCallback);this.allGraphs.push(confidenceGraph);danglingPredictionGraph.syncTo(predictionGraph,{syncY:true});confidenceGraph.syncTo(predictionGraph);predictionGraph.syncTo(confidenceGraph);confidenceGraph.syncLegendTo(predictionGraph);predictionGraph.syncLegendTo(confidenceGraph);predictionGraph.render();danglingPredictionGraph.render();confidenceGraph.render();me._handleDynamicCharts()};FaceOfGrok.prototype._handleDynamicCharts=function(){var me=this,index,predictMonitor,graph,newData,graphX,graphXmin,graphXmax,graphXrange,graphXdiff;if(me.dynamic){predictMonitor=new GROK.PredictionMonitor(me.model,{lastRowIdSeen:me._modelOutput.data[me._modelOutput.data.length-2][0]});predictMonitor.onData(function(input){if(!input||!input.data||input.data.length<=0)return;me._modelOutput.data.pop();me._modelOutput.data=me._modelOutput.data.concat(input.data);for(index=0;index<me.allGraphs.length;index++){graph=me.allGraphs[index];newData=graph._formatModelOutputData(me._modelOutput);graph.updateOptions({file:newData.data});graph.updateOptions({clickCallback:function(){me.autoScroll=false},zoomCallback:function(rangeXmin,rangeXmax,yRanges){me.autoScroll=false;graphX=graph.xAxisExtremes();graphXmin=graphX[0];graphXmax=graphX[1];graphXrange=graphXmax-graphXmin;graphXdiff=graphXmax-rangeXmax;if(graphXdiff<graphXrange*.01){me.rangeXwidth=Math.floor(rangeXmax-rangeXmin);me.autoScroll=true}}});if(me.autoScroll){graphX=graph.xAxisExtremes();graphXmin=graphX[0];graphXmax=graphX[1];if(!me.rangeXwidth){me.rangeXwidth=Math.floor((graphXmax-graphXmin)*.2)}graph.updateOptions({dateWindow:[graphXmax-me.rangeXwidth,graphXmax]})}}});predictMonitor.onError(function(error){console.log("Error:",error)});predictMonitor.start()}};FaceOfGrok.prototype._prepareDomForFogCharts=function(){var tableString='<table class="fog"><tbody>';tableString+='<tr class="fog-top"><td id="'+this.confidenceGraphId+'" class="fog-left confidence-graph"></td><td class="fog-right"></td></tr>';tableString+='<tr class="fog-bottom"><td id="'+this.predictionGraphId+'" class="fog-left prediction-graph"></td>';tableString+='<td id="'+this.danglingPredictionGraphId+'" class="fog-right dangling-prediction-graph"></td></tr>';tableString+='<tr class="fog-legend"><td colspan="2"><div id="fog-legend-top-'+this.legendKey+'" class="fog-legend-top" /><div id="fog-legend-bottom-'+this.legendKey+'" class="fog-legend-bottom" /></td></tr>';tableString+="</tbody></table>";this.$fog.html(tableString)};FaceOfGrok.prototype._reportFatalError=function(eventName,err){var listeners=this.listeners[eventName];if(!listeners){throw err}emit(this.listeners,eventName,err)};FaceOfGrok.prototype._graphDrawn=function(graph,isInitialDraw){var $danglingGraph,me=this,pointsToDisplay=this.options.initialPointsToDisplay;if(isInitialDraw&&this.renderedGraphs===this.allGraphs.length){$danglingGraph=$("#"+this.danglingPredictionGraphId);$danglingGraph.find(".dygraph-rangesel-bgcanvas").hide();$danglingGraph.find(".dygraph-rangesel-fgcanvas").hide();$danglingGraph.find(".dygraph-rangesel-zoomhandle").hide();if(pointsToDisplay){setTimeout(function(){var data=me.predictionGraph.rawData_;me.predictionGraph.updateOptions({dateWindow:[data[data.length-pointsToDisplay][0],data[data.length-1][0]]})},10)}emit(this.listeners,"render")}};FaceOfGrok.prototype.destroy=function(){this.allGraphs.forEach(function(dygraph){dygraph.destroy()})};FaceOfGrok.prototype.__version__="0.4";window.FaceOfGrok=FaceOfGrok})();
